# Nixpacks configuration for Railway Railpack
# This configures Railpack to work with our custom directory structure

[providers]
php = "8.2"
node = "20"

# Override install phase to use correct directories
[phases.install]
dependsOn = ["setup"]
cmds = [
    "cd backend && composer install --optimize-autoloader --no-scripts --no-interaction || exit 1",
    "cd frontend && npm ci || exit 1"
]

# Use custom build script for build phase
[phases.build]
dependsOn = ["install"]
cmds = ["bash build.sh"]

# Start command
[start]
cmd = "bash start.sh"

